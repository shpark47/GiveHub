<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <link href="/css/reset.css" rel="stylesheet" type="text/css">
    <link href="/css/common.css" rel="stylesheet" type="text/css">
    <link href="/css/index.css" rel="stylesheet" type="text/css">
    <link href="/css/navBar.css" rel="stylesheet" type="text/css">
    <link href="/css/footer.css" rel="stylesheet" type="text/css">

</head>
<body>
<div th:replace="~{/common/navbar.html :: navbar}"></div>
<script src="/js/common.js"></script>

<section id="section_01">
    <div id="main" class="main_wrap">
        <div class="container">
            <div class="main_title_wrap">
                <p>아름다운 기부</p>
                <h1>행복한 세상을 만들어갑니다</h1>
            </div>
            <div class="dona_main_btn dona_btn">후원하기</div>
        </div>
    </div>
</section>


<section id="section_02">
    <div class="title_container">
        <div class="title_wrap">
            <h2>100% 전달하는 기부</h2>
            <p>
               <span class="display_block">장기적이고 지속적인 지원을 통해 <span /> <span
                       class="display_block">도움이 필요한 곳에 안정적인 성장 발판을 마련합니다.<span />
            </p>
            <div class="slide_arrow_wrap">
                <div class="right_arrow"></div>
                <div class="left_arrow"></div>
            </div>
        </div>

    </div>
    <div class="right_container">

        <div id="slide_visual" class="visual_img">
            <div id="slide_wrap" class="slide_img_wrap">
<!--                <div class="img_wrap">-->
<!--                    <div class="slide_img">-->
<!--                        <img src="img/Baby_wearing_a_head_correction_helmet.jpg">-->
<!--                    </div>-->
<!--                    <div class="text_wrap">-->
<!--                        <p class="category category_white">아동/청소년</p>-->
<!--                        <h3 class="board_title">"엄마가 세상에서 제일 좋아요" 희귀암 투병중인 별이</h3>-->
<!--                        <a href="#">도움주러가기↗</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="img_wrap">-->
<!--                    <div class="slide_img">-->
<!--                        <img src="img/baby_looking_out_the_window.jpg">-->
<!--                    </div>-->
<!--                    <div class="text_wrap">-->
<!--                        <p class="category category_white">아동/청소년</p>-->
<!--                        <h3 class="board_title">"엄마가 세상에서 제일 좋아요" 희귀암 투병중인 별이</h3>-->
<!--                        <a href="#">도움주러가기↗</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="img_wrap">-->
<!--                    <div class="slide_img">-->
<!--                        <img src="img/Korean_War_Veteran_Grandpa.jpg">-->
<!--                    </div>-->
<!--                    <div class="text_wrap">-->
<!--                        <p class="category category_white">아동/청소년</p>-->
<!--                        <h3 class="board_title">"엄마가 세상에서 제일 좋아요" 희귀암 투병중인 별이</h3>-->
<!--                        <a href="#">도움주러가기↗</a>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
        </div>
    </div>
</section>
<section id="section_03">
    <div class="container">
        <div class="title_container">
            <div class="title_wrap">
                <h2>세상의 행복을 더하는 나눔 소식</h2>
                <div id="slide_arrow" class="slide_arrow_wrap">
                    <div id="right" class="right_arrow"></div>
                    <div id="left" class="left_arrow"></div>
                </div>
            </div>

        </div>
        <div id="board_visual" class="visual_board">
            <div class="board_img_wrap">
                <div class="board_contents">
                    <div class="board_img">
                        <img src="img/board_img01.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">전교 1등 예은이와 아빠의 주먹밥</div>
                        <div class="fun_period">2025.01.10~2025.04.20</div>
                        <div class="organizer">주최자</div>
                    </div>
                </div>
                <div class="board_contents">
                    <div class="board_img">
                        <img src="img/board_img02.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">18살 다훈이와 할머니의 느리게 걷는길</div>
                        <div class="fun_period">2025.01.02~2025.06.22</div>
                        <div class="organizer">주최자</div>
                    </div>
                </div>
                <div class="board_contents">
                    <div class="board_img">
                        <img src="img/board_img03.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">아홉살 민재의 할머니를 지키는 시간</div>
                        <div class="fun_period">2024.12.24~2025.08.10</div>
                        <div class="organizer">주최자</div>
                    </div>
                </div>
                <div class="board_contents">
                    <div class="board_img">
                        <img src="img/board_img04.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">아빠의 작은천사 2살 아린이</div>
                        <div class="fun_period">2025.01.10~2025.04.20</div>
                        <div class="organizer">주최자</div>
                    </div>
                </div>
                <div class="board_contents">
                    <div class="board_img">
                        <img src="img/board_img05.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">전교 1등 예은이와 아빠의 주먹밥</div>
                        <div class="fun_period">2025.01.10~2025.04.20</div>
                        <div class="organizer">주최자</div>
                    </div>
                </div>
                <div class="board_contents">
                    <div class="board_img">
                        <img src="img/board_img06.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">전교 1등 예은이와 아빠의 주먹밥</div>
                        <div class="fun_period">2025.01.10~2025.04.20</div>
                        <div class="organizer">주최자</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="section_04">
    <div class="container">
        <div class="title_container">
            <div class="title_wrap">
                <h2>맞춤 기부 소식을 보여드려요</h2>
            </div>
            <div class="custom_board_wrap">
                <div class="custom_board_contents">
                    <div class="custom_board_img">
                        <img src="img/custom_board_img01.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">푸른 바다를 지키는 확실한 방법</div>
                        <div class="fun_period">2025.01.10~2025.04.20</div>
                        <div class="organizer">생태지평연구소</div>
                    </div>
                </div>
                <div class="custom_board_contents">
                    <div class="custom_board_img">
                        <img src="img/custom_board_img02.jpg">
                    </div>
                    <div class="board_content_text_wrap">
                        <div class="category category_green">아동/청소년</div>
                        <div class="title">무심코 버린 비닐봉지 거북이가 먹어버려요!</div>
                        <div class="fun_period">2025.01.10~2025.04.20</div>
                        <div class="organizer">환경재단</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="floating_btn" class="dona_btn">
    <a href="/donation/donationlist">후원하기</a>
</div>
<script>
    window.onload = () =>{
        $.ajax({
           url: '/donation/new',
           //dataType:'json',
            success : data=>{
               console.log(data);

                const donationContainer = $("#slide_wrap");
                donationContainer.empty(); // 기존 데이터 삭제

               for(const d of data){

                   const donationHTML = `
                    <div class="img_wrap">
                        <div class="slide_img">
                            <img src="/img/${donation.imagePath}" alt="donation image">
                        </div>
                        <div class="text_wrap">
                            <p class="category category_white">${donation.doCategory}</p>
                            <h3 class="board_title">${donation.doTitle}</h3>
                            <a href="/donation/${donation.id}">도움주러가기↗</a>
                        </div>
                    </div>`;
                   donationContainer.append(donationHTML);
               }
            },
            error: data => console.log(data)
        });



    }

    document.addEventListener("DOMContentLoaded", function () {
        const floatingBtn = document.getElementById("floating_btn");
        const footer = document.querySelector("footer");
        const showScrollPosition = window.innerHeight; // 100vh만큼 스크롤했을 때 버튼 보이기
        const fadeInDuration = 300; // ms (버튼이 나타나는 애니메이션 시간)
        let isButtonVisible = false;

        // 초기 설정 - 버튼 숨기기
        floatingBtn.style.opacity = "0";
        floatingBtn.style.transition = `opacity ${fadeInDuration}ms ease`;
        floatingBtn.style.position = "fixed";
        floatingBtn.style.bottom = "14rem";

        document.addEventListener("scroll", function () {
            const footerTop = footer.getBoundingClientRect().top + window.scrollY;
            const btnHeight = floatingBtn.offsetHeight;
            const scrollY = window.scrollY;
            const viewportHeight = window.innerHeight;

            // 스크롤 위치에 따라 버튼 보이기/숨기기
            if (scrollY >= showScrollPosition && !isButtonVisible) {
                floatingBtn.style.opacity = "1"; // 나타남
                isButtonVisible = true;
            } else if (scrollY < showScrollPosition && isButtonVisible) {
                floatingBtn.style.opacity = "0"; // 사라짐
                isButtonVisible = false;
            }

            // footer와 겹치는 시점 계산
            if (scrollY + viewportHeight >= footerTop + 50) {
                // absolute로 전환
                floatingBtn.style.position = "absolute";
                floatingBtn.style.top = `${footerTop - btnHeight - 50}px`;
                floatingBtn.style.bottom = "auto";
            } else {
                // fixed 유지
                floatingBtn.style.position = "fixed";
                floatingBtn.style.bottom = "14rem";
                floatingBtn.style.top = "auto";
            }
        });
    });
</script>

<footer>
    <div th:replace="~{/common/footer.html :: footer_bar}"></div>
</footer>



</body>
</html>